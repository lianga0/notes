### DynamoDB 核心组件

在 DynamoDB 中，表、项目和属性是您使用的核心组件。表是项目的集合，而每个项目是属性的集合。DynamoDB 使用主键来唯一标识表中的每个项目，并且使用二级索引来提供更大的查询灵活性。您可以使用 DynamoDB 流 捕获 DynamoDB 表中的数据修改事件。

DynamoDB 中存在限制。有关更多信息，请参阅 [DynamoDB 中的限制](http://docs.aws.amazon.com/zh_cn/amazondynamodb/latest/developerguide/Limits.html)。

#### DynamoDB 基本组件包括：

- 表 - 类似于其他数据库系统，DynamoDB 将数据存储在表中。表 是数据的集合。

- 项目 - 每个表包含多个项目。项目是一组属性，具有不同于所有其他项目的唯一标识。DynamoDB 中的项目在很多方面都类似于其他数据库系统中的行、记录或元组。

- 属性 - 每个项目包含一个或多个属性。属性是基础的数据元素，无需进一步分解。DynamoDB 中的属性在很多方面都类似于其他数据库系统中的字段或列。

大多数属性是标量类型的，这表示它们只能具有一个值。字符串和数字是标量的常见示例。
项目可以包含嵌套属性。 **DynamoDB 支持最高 32 级深度的嵌套属性**。

##### 主键

创建表时，除表名称外，您还必须指定表的主键。主键唯一标识表中的每个项目，因此，任意两个项目的主键都不相同。

DynamoDB 支持两种不同类型的主键：

- 分区键 - 简单的主键，由一个称为分区键 的属性组成。
DynamoDB 使用分区键的值作为内部哈希函数的输入。来自哈希函数的输出决定了项目将存储到的分区（DynamoDB 内部的物理存储）。
在只有分区键的表中，任何两个项目都不能有相同的分区键值。


- 分区键和排序键 - 称为复合主键，此类型的键由两个属性组成。第一个属性是分区键，第二个属性是排序键。
DynamoDB 使用分区键值作为对内部哈希函数的输入。来自哈希函数的输出决定了项目将存储到的分区（DynamoDB 内部的物理存储）。具有相同分区键的所有项目按排序键值的排序顺序存储在一起。
在具有分区键和排序键的表中，两个项目可以具有相同的分区键值，但是，这两个项目必须具有不同的排序键值(也就是说分区键+排序键必须能够唯一标识一个项目)。

在查询数据时，复合主键可让您获得额外的灵活性。例如，如果您仅提供分区键的值，则 DynamoDB 将仅按分区键检索所有等于指定值的记录。


> 注意

>> 项目的分区键也称为其哈希属性。哈希属性一词源自 DynamoDB 使用的内部哈希函数，以基于数据项目的分区键值实现跨多个分区的数据项目平均分布。
项目的排序键也称为其范围属性。范围属性一词源自 DynamoDB 存储项目的方式，它按照排序键值有序地将具有相同分区键的项目存储在互相紧邻的物理位置。

**每个主键属性必须为标量（表示它只能具有一个值）。主键属性唯一允许的数据类型是字符串、数字和二进制。对于其他非键属性没有任何此类限制**。


##### 二级索引

您可以在一个表上创建一个或多个二级索引。利用 二级索引，除了可对主键进行查询外，还可使用替代键查询表中的数据。DynamoDB 不需要您使用索引，但它们将为您的应用程序提供数据查询方面的更大的灵活性。

DynamoDB 支持两种索引：

- Global secondary index - 一种带有可能与表中不同的分区键和排序键的索引。

- 本地二级索引 - 一种分区键与表中的相同但排序键与表中的不同的索引。
您最多可以为每个表定义 5 个全局二级索引和 5 个本地二级索引。

##### DynamoDB 流

DynamoDB 流 是一项可选功能，用于捕获 DynamoDB 表中的数据修改事件。有关这些事件的数据将以事件发生的顺序近乎实时地出现在流中。

每个事件由一条流记录表示。如果您对表启用流，则每当以下事件之一发生时，DynamoDB 流 都会写入一条流记录：

- 如果向表添加了新项目，则流将捕获整个项目的映像（包括其所有属性）。
- 如果更新了项目，则流将捕获项目中已修改的任何属性的“之前”和“之后”映像。
- 如果从表中删除了项目，则流将在整个项目被删除前捕获其映像。

每条流记录还包含表的名称、事件时间戳和其他元数据。流记录具有 24 个小时的生命周期；在此时间过后，它们将从流中自动删除。

您可以将 DynamoDB 流 与 AWS Lambda 结合使用以创建触发器 - 在流中有您感兴趣的事件出现时自动执行的代码。

Reference: [DynamoDB 核心组件](http://docs.aws.amazon.com/zh_cn/amazondynamodb/latest/developerguide/HowItWorks.CoreComponents.html)

[DynamoDB Core Components](http://docs.aws.amazon.com/en_us/amazondynamodb/latest/developerguide/HowItWorks.CoreComponents.html)